package vm

import (
	"github.com/robertkrimen/otto"
)

var VM *otto.Otto

func init(){
	VM = otto.New()
	VM.Run(`var Hg=["=",".","-","*"],Ig=8388608;var Dg=0,Eg=1,Fg=2,p=null,j=void 0,o=!0,q=!1;Q={};Q.vF=[1.289059486E7,8362377.87,5591021,3481989.83,1678043.12,0];Q.YN=[[1.410526172116255E-8,8.98305509648872E-6,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-0.03801003308653,1.73379812E7],[-7.435856389565537E-9,8.983055097726239E-6,-0.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1.026014486E7],[-3.030883460898826E-8,8.98305509983578E-6,0.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,0.32710905363475,6856817.37],[-1.981981304930552E-8,8.983055099779535E-6,0.03278182852591,40.31678527705744,0.65659298677277,-4.44255534477492,0.85341911805263,0.12923347998204,-0.04625736007561,4482777.06],[3.09191371068437E-9,8.983055096812155E-6,6.995724062E-5,23.10934304144901,-2.3663490511E-4,-0.6321817810242,-0.00663494467273,0.03430082397953,-0.00466043876332,2555164.4],[2.890871144776878E-9,8.983055095805407E-6,-3.068298E-8,7.47137025468032,-3.53937994E-6,-0.02145144861037,-1.234426596E-5,1.0322952773E-4,-3.23890364E-6,826088.5]];Q.rb=function(a){if(a===p||a===j)return new H(0,0);var b,c;b=new H(Math.abs(a.lng),Math.abs(a.lat));for(var d=0;d<this.vF.length;d++)if(b.lat>=this.vF[d]){c=this.YN[d];break}a=this.hJ(a,c);return a=new H(a.lng.toFixed(6),a.lat.toFixed(6))};Q.hJ=function(a,b){if(a&&b){var c=b[0]+b[1]*Math.abs(a.lng),d=Math.abs(a.lat)/b[9],d=b[2]+b[3]*d+b[4]*d*d+b[5]*d*d*d+b[6]*d*d*d*d+b[7]*d*d*d*d*d+b[8]*d*d*d*d*d*d,c=c*(0>a.lng?-1:1),d=d*(0>a.lat?-1:1);return new H(c,d)}};var lb=function(a,b){if("string"==typeof a&&a){var c=a.split("|"),d,e,f;if(1==c.length)d=Gg(a);else if(d=Gg(c[2]),e=Gg(c[0]),f=Gg(c[1]),!b)return d;c={type:d.aV};if(b)switch(c.type){case Fg:e=new H(d.nd[0][0],d.nd[0][1]);e=Q.rb(e);c.point=e;c.W=[e];break;case Eg:c.W=[];d=d.nd[0];for(var g=0,i=d.length-1;g<i;g+=2){var k=new H(d[g],d[g+1]),k=Q.rb(k);c.W.push(k)}e=new H(e.nd[0][0],e.nd[0][1]);f=new H(f.nd[0][0],f.nd[0][1]);e=Q.rb(e);f=Q.rb(f);c.Ua=new eb(e,f)}return c}};function Gg(a){var b;b=a.charAt(0);var c=-1;b==Hg[1]?c=Fg:b==Hg[2]?c=Eg:b==Hg[3]&&(c=Dg);b=c;for(var c=a.substr(1),d=0,e=c.length,f=[],a=[],g=[];d<e;)if(c.charAt(d)==Hg[0]){if(13>e-d)return 0;a:{for(var g=c.substr(d,13),i=f,k=0,l=0,m=0,n=0;6>n;n++){m=Jg(g.substr(1+n,1));if(0>m){g=-1-n;break a}k+=m<<6*n;m=Jg(g.substr(7+n,1));if(0>m){g=-7-n;break a}l+=m<<6*n}i.push(k);i.push(l);g=0}if(0>g)return 0;d+=13}else if(";"==c.charAt(d))a.push(f.slice(0)),f.length=0,++d;else{if(8>e-d)return 0;g=Kg(c.substr(d,8),f);if(0>g)return 0;d+=8}c=0;for(d=a.length;c<d;c++){e=0;for(f=a[c].length;e<f;e++)a[c][e]/=100}return{aV:b,nd:a}}function Jg(a){var b=a.charCodeAt(0);return"A"<=a&&"Z">=a?b-65:"a"<=a&&"z">=a?26+b-97:"0"<=a&&"9">=a?52+b-48:"+"==a?62:"/"==a?63:-1}function Kg(a,b){var c=b.length;if(2>c)return-1;for(var d=0,e=0,f=0,g=0;4>g;g++){f=Jg(a.substr(g,1));if(0>f)return-1-g;d+=f<<6*g;f=Jg(a.substr(4+g,1));if(0>f)return-5-g;e+=f<<6*g}d>Ig&&(d=Ig-d);e>Ig&&(e=Ig-e);b.push(b[c-2]+d);b.push(b[c-1]+e);return 0}var Ib="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ya(a){return"string"==typeof a}function Jb(a){var b="",c,d,e="",f,g="",i=0;f=/[^A-Za-z0-9\+\/\=]/g;if(!a||f.exec(a))return a;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do c=Ib.indexOf(a.charAt(i++)),d=Ib.indexOf(a.charAt(i++)),f=Ib.indexOf(a.charAt(i++)),g=Ib.indexOf(a.charAt(i++)),c=c<<2|d>>4,d=(d&15)<<4|f>>2,e=(f&3)<<6|g,b+=String.fromCharCode(c),64!=f&&(b+=String.fromCharCode(d)),64!=g&&(b+=String.fromCharCode(e));while(i<a.length);return b}function H(a,b){isNaN(a)&&(a=Jb(a),a=isNaN(a)?0:a);Ya(a)&&(a=parseFloat(a));isNaN(b)&&(b=Jb(b),b=isNaN(b)?0:b);Ya(b)&&(b=parseFloat(b));this.lng=a;this.lat=b}H.QK=function(a){return a&&180>=a.lng&&-180<=a.lng&&74>=a.lat&&-74<=a.lat};H.prototype.$a=function(a){return a&&this.lat==a.lat&&this.lng==a.lng};function eb(a,b){a&&!b&&(b=a);this.qe=this.pe=this.ve=this.ue=this.kl=this.Uk=p;a&&(this.kl=new H(a.lng,a.lat),this.Uk=new H(b.lng,b.lat),this.ve=a.lng,this.ue=a.lat,this.qe=b.lng,this.pe=b.lat)}`)
}

